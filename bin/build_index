#!/usr/bin/env ruby

require 'data_mapper'
require 'find'
require 'thyme'

DataMapper.auto_upgrade!

ARGV.each do |library_path|
  Find.find(library_path).each do |filename|
    if Thyme::Photo.photo?(filename)
      Thyme::Photo.create_from_file(filename)
    end
  end
end

Thyme::Set.map(&:update_taken_at!)
